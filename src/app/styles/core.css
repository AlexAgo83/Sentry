.app-kicker {
    margin: 0;
    font-size: var(--text-xs-size);
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--color-secondary);
}

.app-version-tag {
    padding: var(--m2) var(--m7);
    border-radius: 999px;
    border: 1px solid rgba(242, 193, 78, 0.3);
    background: rgba(21, 28, 46, 0.85);
    color: var(--color-text);
    font-size: var(--text-s-size);
    font-family: var(--display-font);
    letter-spacing: 0.08em;
    text-transform: uppercase;
}

.app-version-fade {
    opacity: 0.6;
}

.app-version-button {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease, background 0.2s ease;
}

.app-version-button:hover {
    border-color: rgba(242, 193, 78, 0.6);
    background: rgba(21, 28, 46, 0.95);
    box-shadow: 0 0 0 1px rgba(242, 193, 78, 0.2);
    transform: translateY(-1px);
}

.app-version-icon {
    display: inline-flex;
    width: 14px;
    height: 14px;
}

.app-version-icon svg {
    width: 100%;
    height: 100%;
    display: block;
}

.ts-layout {
    grid-template-columns: minmax(280px, 340px) minmax(0, 1fr);
    grid-auto-rows: min-content;
    align-items: start;
    column-gap: var(--m12);
}

.ts-layout > :first-child {
    grid-column: 1;
}

.ts-layout > :not(:first-child) {
    grid-column: 2;
}

.ts-main-stack {
    grid-column: 2;
    display: flex;
    flex-direction: column;
    gap: var(--m10);
    min-width: 0;
}

.ts-panel {
    flex-direction: column;
    flex-wrap: nowrap;
    align-items: stretch;
    gap: var(--m5);
}

.ts-panel-body {
    display: flex;
    flex-direction: column;
    gap: var(--m3);
}

.ts-inventory-panel {
    grid-column: 2;
    height: max-content;
}

.ts-panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--m4);
}

.ts-panel-heading {
    display: flex;
    align-items: center;
    gap: var(--m4);
}

.ts-panel-actions {
    margin-left: auto;
    display: inline-flex;
    align-items: center;
    gap: 12px;
}

.ts-panel-actions-inline {
    flex-wrap: nowrap;
}

.ts-panel-title {
    margin: 0;
    font-size: var(--text-l-size);
    font-family: var(--display-font);
    color: var(--color-primary);
    letter-spacing: 0.04em;
}

.ts-panel-counter {
    font-size: var(--text-xs-size);
    text-transform: uppercase;
    letter-spacing: 0.18em;
    color: var(--color-text-fade);
}

.ts-panel-meta {
    font-size: var(--text-xs-size);
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--color-text-fade);
}

.ts-collapse-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: 1px solid rgba(93, 217, 193, 0.4);
    background: rgba(13, 19, 33, 0.75);
    color: var(--color-text-fade);
    width: 44px;
    height: 44px;
    padding: 0;
    border-radius: 999px;
    font-size: var(--text-xs-size);
    letter-spacing: 0.16em;
    text-transform: uppercase;
    cursor: pointer;
    line-height: 1;
}

.ts-collapse-label {
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.ts-collapse-icon {
    width: 18px;
    height: 18px;
    display: block;
}

.ts-collapse-button:disabled {
    opacity: 0.45;
    cursor: not-allowed;
    border-color: rgba(93, 217, 193, 0.25);
    color: rgba(208, 219, 240, 0.55);
}

.ts-collapse-button:hover:not(:disabled) {
    border-color: rgba(242, 193, 78, 0.6);
    color: var(--color-primary);
}

.ts-player-list {
    display: flex;
    flex-direction: column;
    gap: var(--m4);
}

.ts-player-card {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--m4);
    padding: var(--m4) var(--m7);
    border-radius: var(--border-radius-harmonized);
    border: 1px solid rgba(242, 193, 78, 0.2);
    background: rgba(12, 18, 32, 0.8);
    color: var(--color-text);
    text-align: left;
    font-family: var(--default-font);
    cursor: pointer;
    transition: border-color 0.14s ease, box-shadow 0.14s ease, transform 0.12s ease;
    will-change: border-color, box-shadow, transform;
    transform: translateZ(0);
}

.ts-player-card:hover {
    transform: translate3d(0, -1px, 0);
    border-color: rgba(242, 193, 78, 0.55);
    box-shadow: 0 6px 14px -12px rgba(242, 193, 78, 0.6);
}

.ts-player-card.is-disabled,
.ts-player-card:disabled {
    opacity: 0.55;
    cursor: not-allowed;
    border-color: rgba(93, 217, 193, 0.18);
    transform: none;
}

.ts-player-card.is-active {
    border-color: rgba(93, 217, 193, 0.8);
    box-shadow: 0 0 0 1px rgba(93, 217, 193, 0.4);
}

.ts-player-card-add {
    border-style: dashed;
    border-color: rgba(242, 193, 78, 0.35);
    background: rgba(12, 18, 32, 0.55);
}

.ts-player-card-add:hover {
    border-color: rgba(242, 193, 78, 0.7);
}

.ts-player-info {
    display: flex;
    flex-direction: column;
    gap: var(--m1);
}

.ts-player-main {
    display: flex;
    align-items: center;
    gap: var(--m4);
}

.ts-player-avatar {
    width: 52px;
    height: 52px;
    position: relative;
    --ts-avatar-skin: #d8c2a3;
    --ts-avatar-skill-size: 18px;
    --ts-avatar-skill-top: 60%;
    --ts-avatar-pos-y: 50%;
    --ts-avatar-outline-color: rgba(0, 0, 0, 0.425);
    --ts-avatar-outline-size: 1px;
    border-radius: 12px;
    border: 1px solid rgba(93, 217, 193, 0.4);
    background:
        radial-gradient(circle at 30% 30%, rgba(93, 217, 193, 0.25), rgba(12, 18, 32, 0)),
        rgba(8, 12, 22, 0.7);
    box-shadow: inset 0 0 0 1px rgba(242, 193, 78, 0.15);
    flex-shrink: 0;
    overflow: hidden;
    isolation: isolate;
}

.ts-player-avatar-figure {
    position: absolute;
    inset: var(--ts-avatar-outline-size);
    z-index: 0;
    filter:
        drop-shadow(var(--ts-avatar-outline-size) 0 0 var(--ts-avatar-outline-color))
        drop-shadow(calc(var(--ts-avatar-outline-size) * -1) 0 0 var(--ts-avatar-outline-color))
        drop-shadow(0 var(--ts-avatar-outline-size) 0 var(--ts-avatar-outline-color))
        drop-shadow(0 calc(var(--ts-avatar-outline-size) * -1) 0 var(--ts-avatar-outline-color))
        drop-shadow(var(--ts-avatar-outline-size) var(--ts-avatar-outline-size) 0 var(--ts-avatar-outline-color))
        drop-shadow(calc(var(--ts-avatar-outline-size) * -1) var(--ts-avatar-outline-size) 0 var(--ts-avatar-outline-color))
        drop-shadow(var(--ts-avatar-outline-size) calc(var(--ts-avatar-outline-size) * -1) 0 var(--ts-avatar-outline-color))
        drop-shadow(calc(var(--ts-avatar-outline-size) * -1) calc(var(--ts-avatar-outline-size) * -1) 0 var(--ts-avatar-outline-color));
    pointer-events: none;
}

.ts-player-avatar-layer {
    position: absolute;
    inset: 0;
    background-repeat: no-repeat;
    background-position: center var(--ts-avatar-pos-y, 50%);
}

.ts-player-avatar-base-body {
    z-index: -1;
    background-image: var(--ts-avatar-base-body, none);
    background-size: 92% auto;
}

.ts-player-avatar-gear-cape {
    z-index: 0;
    background-image: var(--ts-avatar-gear-cape, none);
    background-size: 96% auto;
}

.ts-player-avatar-legs {
    z-index: 0;
    background-image: url("/img/characters/base/body-legs.svg");
    background-size: 92% auto;
}

.ts-player-avatar-gear-legs {
    z-index: 0;
    background-image: var(--ts-avatar-gear-legs, none);
    background-size: 92% auto;
}

.ts-player-avatar-torso {
    z-index: 4;
    background-color: var(--ts-avatar-torso, #5d6a82);
    -webkit-mask-image: url("/img/characters/base/body-torso.svg");
    mask-image: url("/img/characters/base/body-torso.svg");
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center var(--ts-avatar-pos-y, 50%);
    mask-position: center var(--ts-avatar-pos-y, 50%);
    -webkit-mask-size: 82% auto;
    mask-size: 82% auto;
}

.ts-player-avatar-gear-torso {
    z-index: 4;
    background-image: var(--ts-avatar-gear-torso, none);
    background-size: 82% auto;
}

.ts-player-avatar-head {
    z-index: 1;
    background-color: var(--ts-avatar-skin);
    -webkit-mask-image: url("/img/characters/base/body-head.svg");
    mask-image: url("/img/characters/base/body-head.svg");
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center var(--ts-avatar-pos-y, 50%);
    mask-position: center var(--ts-avatar-pos-y, 50%);
    -webkit-mask-size: 72% auto;
    mask-size: 72% auto;
}

.ts-player-avatar-face {
    z-index: 2;
    background-image: var(--ts-avatar-face, url("/img/characters/faces/face-01.svg"));
    background-size: 72% auto;
    background-repeat: no-repeat;
    background-position: center var(--ts-avatar-pos-y, 50%);
    pointer-events: none;
}

.ts-player-avatar-hair {
    z-index: 3;
    background-image: var(--ts-avatar-hair, url("/img/characters/hair/hair-01.svg"));
    background-size: 72% auto;
    background-repeat: no-repeat;
    background-position: center var(--ts-avatar-pos-y, 50%);
    -webkit-mask-image: var(--ts-avatar-hair, url("/img/characters/hair/hair-01.svg"));
    mask-image: var(--ts-avatar-hair, url("/img/characters/hair/hair-01.svg"));
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center var(--ts-avatar-pos-y, 50%);
    mask-position: center var(--ts-avatar-pos-y, 50%);
    -webkit-mask-size: 72% auto;
    mask-size: 72% auto;
    pointer-events: none;
    opacity: var(--ts-avatar-hair-opacity, 1);
}

.ts-player-avatar-hair::after {
    content: "";
    position: absolute;
    inset: 0;
    background-color: var(--ts-avatar-hair-color, #3b2c22);
    mix-blend-mode: color;
    opacity: var(--ts-avatar-hair-tint-opacity, 0.85);
    pointer-events: none;
}

.ts-player-avatar-gear-head {
    z-index: 7;
    background-image: var(--ts-avatar-gear-head, none);
    background-size: 76% auto;
}

.ts-player-avatar-hands {
    z-index: 5;
    background-color: var(--ts-avatar-skin);
    -webkit-mask-image: url("/img/characters/base/body-hands.svg");
    mask-image: url("/img/characters/base/body-hands.svg");
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center var(--ts-avatar-pos-y, 50%);
    mask-position: center var(--ts-avatar-pos-y, 50%);
    -webkit-mask-size: 92% auto;
    mask-size: 92% auto;
}

.ts-player-avatar-gear-hands {
    z-index: 6;
    background-image: var(--ts-avatar-gear-hands, none);
    background-size: 92% auto;
}

.ts-player-avatar-feets {
    z-index: 5;
    background-color: var(--ts-avatar-skin);
    -webkit-mask-image: url("/img/characters/base/body-feet.svg");
    mask-image: url("/img/characters/base/body-feet.svg");
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center var(--ts-avatar-pos-y, 50%);
    mask-position: center var(--ts-avatar-pos-y, 50%);
    -webkit-mask-size: 92% auto;
    mask-size: 92% auto;
}

.ts-player-avatar-gear-feets {
    z-index: 6;
    background-image: var(--ts-avatar-gear-feets, none);
    background-size: 92% auto;
}

.ts-player-avatar-skill {
    position: absolute;
    left: 50%;
    top: var(--ts-avatar-skill-top, 56%);
    transform: translate(-50%, -50%);
    width: var(--ts-avatar-skill-size);
    height: var(--ts-avatar-skill-size);
    z-index: 2;
    opacity: 0.7;
    pointer-events: none;
}

.ts-player-avatar-skill svg {
    width: 100%;
    height: 100%;
    display: block;
}

.ts-player-avatar.is-placeholder {
    opacity: 0.35;
}

.ts-player-avatar.is-placeholder .ts-player-avatar-layer {
    opacity: 0;
}

.ts-player-name {
    font-weight: 600;
}

.ts-player-meta {
    font-size: var(--text-s-size);
    color: var(--color-text-fade);
}

.ts-player-skill {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    font-size: var(--text-xs-size);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--color-primary);
    flex-shrink: 0;
    text-align: right;
}

.ts-player-skill-icon {
    width: 32px;
    height: 32px;
    margin-bottom: var(--m1);
}

.ts-player-skill-icon svg {
    width: 100%;
    height: 100%;
    display: block;
}

.ts-player-skill-label {
    font-size: var(--text-xs-size);
}

.ts-player-skill-label.is-combat {
    color: rgba(239, 77, 67, 0.95);
}

.ts-player-skill-badge {
    display: inline-block;
    margin-left: var(--m2);
    padding: var(--m1) var(--m4);
    border-radius: 999px;
    border: 1px solid rgba(242, 193, 78, 0.45);
    background: rgba(12, 18, 32, 0.7);
    font-size: calc(var(--text-xs-size) - 1px);
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--color-primary);
}

.ts-player-skill-badge.is-combat {
    border-color: rgba(239, 77, 67, 0.7);
    color: rgba(239, 77, 67, 0.95);
    background: rgba(239, 77, 67, 0.12);
}

.ts-player-actions {
    display: flex;
    align-items: center;
    gap: var(--m2);
}

.ts-icon-button {
    border: 1px solid rgba(93, 217, 193, 0.4);
    background: rgba(13, 19, 33, 0.9);
    color: var(--color-text);
    padding: var(--m3) var(--m6);
    min-height: 40px;
    min-width: 52px;
    line-height: 1;
    border-radius: 999px;
    font-size: var(--text-xs-size);
    letter-spacing: 0.16em;
    text-transform: uppercase;
    cursor: pointer;
    transition: border-color 0.2s ease, color 0.2s ease, background 0.2s ease;
}

.ts-icon-button:hover {
    border-color: rgba(242, 193, 78, 0.7);
    color: var(--color-primary);
}

.ts-icon-button.is-action {
    border-color: rgba(242, 193, 78, 0.6);
    background: rgba(20, 26, 40, 0.95);
}

.ts-panel-action-button {
    padding-left: var(--m8);
    padding-right: var(--m8);
}

.ts-add-player {
    margin-top: var(--m4);
}

.ts-inventory-toggle {
    background: rgba(13, 19, 33, 0.9);
    color: var(--color-text);
}

.ts-inventory-toggle:hover {
    background: rgba(93, 217, 193, 0.2);
    color: var(--color-text);
}

.ts-field-group {
    display: flex;
    flex-direction: column;
    gap: var(--m4);
}

.ts-field-label {
    font-size: var(--text-s-size);
    text-transform: uppercase;
    letter-spacing: 0.18em;
    color: var(--color-text-fade);
}

.ts-focusable {
    min-height: 40px;
    min-width: 40px;
}

.ts-focusable:focus-visible,
.ts-inventory-slot:focus-visible,
.ts-modal-close:focus-visible {
    outline: 2px solid rgba(93, 217, 193, 0.9);
    box-shadow: 0 0 0 3px rgba(93, 217, 193, 0.4);
}

.ts-action-row {
    display: flex;
    align-items: center;
    gap: var(--m4);
}

.ts-action-row .generic-field.button {
    width: auto;
    flex: 1;
}

.ts-action-row .generic-field.button.ts-stop {
    background: rgba(22, 30, 50, 0.9);
    color: var(--color-text);
}

.ts-action-row .generic-field.button.ts-stop:hover {
    background: rgba(93, 217, 193, 0.2);
    color: var(--color-text);
}

.ts-action-row .generic-field.button.ts-simulate {
    background: rgba(22, 30, 50, 0.9);
    color: var(--color-text);
}

.ts-action-row .generic-field.button.ts-simulate:hover {
    background: rgba(93, 217, 193, 0.2);
    color: var(--color-text);
}
